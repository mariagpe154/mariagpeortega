#include <iostream>
#include <string>
#include <cctype> // Para toupper y isalpha

std::string generarRFC(const std::string& apPaterno, const std::string& apMaterno, 
                       const std::string& nombre, const std::string& fechaNacimiento) {
    std::string rfc;

    // 1. Primeros 2 caracteres: apPaterno
    std::string ap1 = apPaterno;
    for (char& c : ap1) c = toupper(c);
    rfc += ap1[0];
    for (char c : ap1.substr(1)) {
        if (std::string("AEIOU").find(c) != std::string::npos) {
            rfc += c;
            break;
        }
    }

    // 2. 3ª posición: apMaterno (o X si vacío)
    std::string ap2 = apMaterno.empty() ? "X" : apMaterno;
    rfc += toupper(ap2[0]);

    // 3. 4ª posición: nombre (o X si inconveniente)
    std::string nom = nombre;
    char inicialNombre = toupper(nom[0]);
    if (std::string("AEIOU").find(inicialNombre) != std::string::npos) {
        rfc += 'X'; // Evitar palabras inconvenientes
    } else {
        rfc += inicialNombre;
    }

    // 4. Fecha: AAMMDD
    size_t pos1 = fechaNacimiento.find('/');
    size_t pos2 = fechaNacimiento.find('/', pos1 + 1);
    std::string dia = fechaNacimiento.substr(0, pos1);
    std::string mes = fechaNacimiento.substr(pos1 + 1, pos2 - pos1 - 1);
    std::string anio = fechaNacimiento.substr(pos2 + 1);
    rfc += anio.substr(2, 2) + mes + dia;

    // 5. Homoclave (simplificada: XX)
    rfc += "XX";

    return rfc;
}

int main() {
    std::string apPaterno, apMaterno, nombre, fechaNacimiento;

    std::cout << "Apellido Paterno: ";
    std::getline(std::cin, apPaterno);
    std::cout << "Apellido Materno: ";
    std::getline(std::cin, apMaterno);
    std::cout << "Nombre: ";
    std::getline(std::cin, nombre);
    std::cout << "Fecha de nacimiento (DD/MM/YYYY): ";
    std::getline(std::cin, fechaNacimiento);

    std::string rfc = generarRFC(apPaterno, apMaterno, nombre, fechaNacimiento);
    std::cout << "\nRFC generado: " << rfc << std::endl;

    return 0;
}
